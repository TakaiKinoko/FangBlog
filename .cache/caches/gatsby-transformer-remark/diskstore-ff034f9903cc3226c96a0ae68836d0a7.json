{"expireTime":9007200830663967000,"key":"transformer-remark-markdown-html-ast-c8e895bc714875e16fe3a12b8ba64326-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-reading-time-","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Motivated by a CUDA puzzle I tried to solve today, I’d like to talk more about resource assignment. ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":101,"offset":101}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":101,"offset":101}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"A Puzzle","position":{"start":{"line":4,"column":4,"offset":106},"end":{"line":4,"column":12,"offset":114}}}],"position":{"start":{"line":4,"column":1,"offset":103},"end":{"line":4,"column":12,"offset":114}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"problem","position":{"start":{"line":6,"column":5,"offset":120},"end":{"line":6,"column":12,"offset":127}}}],"position":{"start":{"line":6,"column":1,"offset":116},"end":{"line":6,"column":12,"offset":127}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Adding two big arrays element-wise.","position":{"start":{"line":8,"column":1,"offset":129},"end":{"line":8,"column":36,"offset":164}}}],"position":{"start":{"line":8,"column":1,"offset":129},"end":{"line":8,"column":36,"offset":164}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"settings","position":{"start":{"line":10,"column":5,"offset":170},"end":{"line":10,"column":13,"offset":178}}}],"position":{"start":{"line":10,"column":1,"offset":166},"end":{"line":10,"column":13,"offset":178}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Suppose a GPU has 8 SMs","position":{"start":{"line":12,"column":3,"offset":182},"end":{"line":12,"column":26,"offset":205}}}],"position":{"start":{"line":12,"column":1,"offset":180},"end":{"line":12,"column":26,"offset":205}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Each SM has 32 SPs","position":{"start":{"line":13,"column":3,"offset":208},"end":{"line":13,"column":21,"offset":226}}}],"position":{"start":{"line":13,"column":1,"offset":206},"end":{"line":13,"column":21,"offset":226}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Warp size is 16, instead of 32","position":{"start":{"line":14,"column":3,"offset":229},"end":{"line":14,"column":33,"offset":259}}}],"position":{"start":{"line":14,"column":1,"offset":227},"end":{"line":14,"column":33,"offset":259}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"kernel adds one element from each array together","position":{"start":{"line":15,"column":3,"offset":262},"end":{"line":15,"column":51,"offset":310}}}],"position":{"start":{"line":15,"column":1,"offset":260},"end":{"line":15,"column":51,"offset":310}}},{"type":"text","value":"\n"}],"position":{"start":{"line":12,"column":1,"offset":180},"end":{"line":15,"column":51,"offset":310}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"questions","position":{"start":{"line":17,"column":5,"offset":316},"end":{"line":17,"column":14,"offset":325}}}],"position":{"start":{"line":17,"column":1,"offset":312},"end":{"line":17,"column":14,"offset":325}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Say if we were to compute everything sequentially, it takes time ","position":{"start":{"line":19,"column":1,"offset":327},"end":{"line":19,"column":66,"offset":392}}},{"type":"raw","value":"<code class=\"language-text\">t</code>","position":{"start":{"line":19,"column":66,"offset":392},"end":{"line":19,"column":73,"offset":399}}},{"type":"text","value":" to finish.","position":{"start":{"line":19,"column":73,"offset":399},"end":{"line":19,"column":84,"offset":410}}}],"position":{"start":{"line":19,"column":1,"offset":327},"end":{"line":19,"column":84,"offset":410}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"scenario 1","position":{"start":{"line":21,"column":6,"offset":417},"end":{"line":21,"column":16,"offset":427}}}],"position":{"start":{"line":21,"column":1,"offset":412},"end":{"line":21,"column":16,"offset":427}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Assume that 256 threads are enough to keep all SPs in the SM busy all the time. What is the amount of time it’d take to perform the computation for ","position":{"start":{"line":23,"column":1,"offset":429},"end":{"line":23,"column":149,"offset":577}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"one block of 1024","position":{"start":{"line":23,"column":151,"offset":579},"end":{"line":23,"column":168,"offset":596}}}],"position":{"start":{"line":23,"column":149,"offset":577},"end":{"line":23,"column":170,"offset":598}}},{"type":"text","value":" threads? ","position":{"start":{"line":23,"column":170,"offset":598},"end":{"line":23,"column":180,"offset":608}}}],"position":{"start":{"line":23,"column":1,"offset":429},"end":{"line":23,"column":180,"offset":608}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"scenario 2","position":{"start":{"line":25,"column":6,"offset":615},"end":{"line":25,"column":16,"offset":625}}}],"position":{"start":{"line":25,"column":1,"offset":610},"end":{"line":25,"column":16,"offset":625}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"What if we use ","position":{"start":{"line":27,"column":1,"offset":627},"end":{"line":27,"column":16,"offset":642}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"two blocks","position":{"start":{"line":27,"column":18,"offset":644},"end":{"line":27,"column":28,"offset":654}}}],"position":{"start":{"line":27,"column":16,"offset":642},"end":{"line":27,"column":30,"offset":656}}},{"type":"text","value":" of ","position":{"start":{"line":27,"column":30,"offset":656},"end":{"line":27,"column":34,"offset":660}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"512 threads","position":{"start":{"line":27,"column":36,"offset":662},"end":{"line":27,"column":47,"offset":673}}}],"position":{"start":{"line":27,"column":34,"offset":660},"end":{"line":27,"column":49,"offset":675}}},{"type":"text","value":" each?","position":{"start":{"line":27,"column":49,"offset":675},"end":{"line":27,"column":55,"offset":681}}}],"position":{"start":{"line":27,"column":1,"offset":627},"end":{"line":27,"column":55,"offset":681}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"CUDA Resource Assignment","position":{"start":{"line":29,"column":4,"offset":686},"end":{"line":29,"column":28,"offset":710}}}],"position":{"start":{"line":29,"column":1,"offset":683},"end":{"line":29,"column":28,"offset":710}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"sequence of events","position":{"start":{"line":31,"column":5,"offset":716},"end":{"line":31,"column":23,"offset":734}}}],"position":{"start":{"line":31,"column":1,"offset":712},"end":{"line":31,"column":23,"offset":734}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"kernel launch","position":{"start":{"line":33,"column":4,"offset":739},"end":{"line":33,"column":17,"offset":752}}}],"position":{"start":{"line":33,"column":1,"offset":736},"end":{"line":34,"column":1,"offset":753}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"CUDA runtime generates ","position":{"start":{"line":35,"column":4,"offset":757},"end":{"line":35,"column":27,"offset":780}}}],"position":{"start":{"line":35,"column":1,"offset":754},"end":{"line":35,"column":27,"offset":780}}},{"type":"text","value":"\n"}],"position":{"start":{"line":33,"column":1,"offset":736},"end":{"line":35,"column":27,"offset":780}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":35,"column":27,"offset":780}}}}